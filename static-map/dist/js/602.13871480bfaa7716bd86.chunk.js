(self.webpackChunkstatic_map=self.webpackChunkstatic_map||[]).push([[602],{90602:(t,o,e)=>{"use strict";e.r(o),e.d(o,{default:()=>z});var i=e(93379),n=e.n(i),s=e(96272);n()(s.Z,{insert:"head",singleton:!1}),s.Z.locals;var r=e(27418),a=e.n(r),p=e(49179),c=e(58493),h=e(93409),l=e(23068),u=e(97016),d=e(29902),g=e(13002),m=e(9520),f=e(73381),y=e(40353),w=e(91358),_=e(21882),v=e(18672),k="accuracy",O="accuracyGeometry",A="altitude",b="altitudeAccuracy",x="heading",C="position",E="projection",L="speed",F="tracking",P="trackingOptions",H=function(t){function o(o){t.call(this,f.Z.ERROR),this.code=o.code,this.message=o.message}return t&&(o.__proto__=t),o.prototype=Object.create(t&&t.prototype),o.prototype.constructor=o,o}(m.ZP);const T=function(t){function o(o){t.call(this);var e=o||{};this.position_=null,this.transform_=v.gD,this.watchId_=void 0,(0,g.oL)(this,(0,c.v_)(E),this.handleProjectionChanged_,this),(0,g.oL)(this,(0,c.v_)(F),this.handleTrackingChanged_,this),void 0!==e.projection&&this.setProjection(e.projection),void 0!==e.trackingOptions&&this.setTrackingOptions(e.trackingOptions),this.setTracking(void 0!==e.tracking&&e.tracking)}return t&&(o.__proto__=t),o.prototype=Object.create(t&&t.prototype),o.prototype.constructor=o,o.prototype.disposeInternal=function(){this.setTracking(!1),t.prototype.disposeInternal.call(this)},o.prototype.handleProjectionChanged_=function(){var t=this.getProjection();t&&(this.transform_=(0,v.WO)((0,v.U2)("EPSG:4326"),t),this.position_&&this.set(C,this.transform_(this.position_)))},o.prototype.handleTrackingChanged_=function(){if(w.De){var t=this.getTracking();t&&void 0===this.watchId_?this.watchId_=navigator.geolocation.watchPosition(this.positionChange_.bind(this),this.positionError_.bind(this),this.getTrackingOptions()):t||void 0===this.watchId_||(navigator.geolocation.clearWatch(this.watchId_),this.watchId_=void 0)}},o.prototype.positionChange_=function(t){var o=t.coords;this.set(k,o.accuracy),this.set(A,null===o.altitude?void 0:o.altitude),this.set(b,null===o.altitudeAccuracy?void 0:o.altitudeAccuracy),this.set(x,null===o.heading?void 0:(0,_.Yr)(o.heading)),this.position_?(this.position_[0]=o.longitude,this.position_[1]=o.latitude):this.position_=[o.longitude,o.latitude];var e=this.transform_(this.position_);this.set(C,e),this.set(L,null===o.speed?void 0:o.speed);var i=(0,y.iu)(this.position_,o.accuracy);i.applyTransform(this.transform_),this.set(O,i),this.changed()},o.prototype.positionError_=function(t){this.setTracking(!1),this.dispatchEvent(new H(t))},o.prototype.getAccuracy=function(){return this.get(k)},o.prototype.getAccuracyGeometry=function(){return this.get(O)||null},o.prototype.getAltitude=function(){return this.get(A)},o.prototype.getAltitudeAccuracy=function(){return this.get(b)},o.prototype.getHeading=function(){return this.get(x)},o.prototype.getPosition=function(){return this.get(C)},o.prototype.getProjection=function(){return this.get(E)},o.prototype.getSpeed=function(){return this.get(L)},o.prototype.getTracking=function(){return this.get(F)},o.prototype.getTrackingOptions=function(){return this.get(P)},o.prototype.setProjection=function(t){this.set(E,(0,v.U2)(t))},o.prototype.setTracking=function(t){this.set(F,t)},o.prototype.setTrackingOptions=function(t){this.set(P,t)},o}(c.ZP);var D=e(52043),Z=e(69669),S=e(98090),I=e(31219),j=e(98185),G=e(20767),B=e(9371),N=e(23493),U=e.n(N);const V=function(){let t=document.createElement("div");t.setAttribute("class","ol-popup");let o=document.createElement("a");o.setAttribute("class","ol-popup-close-btn"),o.setAttribute("href","#close"),o.innerHTML="x";let e=document.createElement("div");e.setAttribute("class","ol-popup-cnt-wrapper");let i=document.createElement("div");i.setAttribute("class","ol-popup-cnt"),e.appendChild(i);let n=document.createElement("div");n.setAttribute("class","ol-popup-tip-wrapper");let s=document.createElement("div");return s.setAttribute("class","ol-popup-tip"),n.appendChild(s),t.appendChild(o),t.appendChild(e),t.appendChild(n),t}(),M=function(t,o){c.ZP.call(this,{state:"DISABLED"}),this.map=t;let e={drawCircle:!0,follow:!0,stopFollowingOnDrag:!1,remainActive:!0,locateStyle:this._getDefaultStyles(),metric:!0,onLocationError:this.onLocationError,keepCurrentZoomLevel:!1,showPopup:!0,strings:{metersUnit:"meters",feetUnit:"feet",popup:"You are within {distance} {unit} from this point"},locateOptions:{maximumAge:2e3,enableHighAccuracy:!1,timeout:1e4,maxZoom:18}};this.options=a()({},e,o||{}),this.geolocate=new T({projection:this.map.getView().getProjection(),trackingOptions:this.options.locateOptions}),this.updateHandler=this._updatePosFt.bind(this),this.geolocate.on("change:position",this.options.locateOptions.rateControl?U()(this.updateHandler,this.options.locateOptions.rateControl):this.updateHandler),this.popup=V,this.popup.hidden=!0,this.popCnt=V.getElementsByClassName("ol-popup-cnt")[0],this.overlay=new h.Z({element:this.popup,positioning:"top-center",stopEvent:!1}),this.layer=new d.Z({source:new u.Z({useSpatialIndex:!1})}),this.posFt=new l.Z({geometry:this.geolocate.getAccuracyGeometry(),name:"position",id:"_locate-pos"}),this.posFt.setStyle(this.options.locateStyle),this.layer.getSource().addFeature(this.posFt),this.clickHandler=this.mapClick.bind(this),this.stopHandler=this.stopFollow.bind(this),this.errorHandler=this.options.onLocationError.bind(this)};(0,p.XW)(M,c.ZP),M.prototype.start=function(){this.geolocate.on("error",this.errorHandler),this.follow=this.options.follow,this.geolocate.setTracking(!0),this.layer.setMap(this.map),this.map.addOverlay(this.overlay),this.options.showPopup&&(this.map.on("click",this.clickHandler),this.map.on("touch",this.clickHandler)),this.options.stopFollowingOnDrag&&this.map.on("pointerdrag",this.stopHandler),this.p?this._updatePosFt():this.set("state","LOCATING")},M.prototype.startFollow=function(){this.follow=!0,this.options.stopFollowingOnDrag&&this.map.on("pointerdrag",this.stopHandler),this.p&&this._updatePosFt()},M.prototype.stop=function(){this.geolocate.un("error",this.errorHandler),this.geolocate.setTracking(!1),this.popup.hide=!0,this.map.removeOverlay(this.overlay),this.layer.setMap(null),this.options.showPopup&&(this.map.un("click",this.clickHandler),this.map.un("touch",this.clickHandler)),this.options.stopFollowingOnDrag&&this.map.un("pointerdrag",this.stopHandler),this.set("state","DISABLED")},M.prototype.stopFollow=function(){this.follow=!1,this.map.un("pointerdrag",this.stopHandler),this.set("state","ENABLED")},M.prototype._updatePosFt=function(){let t=this.get("state"),o=this.follow?"FOLLOWING":"ENABLED";o!==t&&this.set("state",o);let e=this.geolocate.getPosition();this.p=e;let i=new D.Z([parseFloat(e[0]),parseFloat(e[1])]);if(this.options.drawCircle){let t=new Z.Z([parseFloat(e[0]),parseFloat(e[1])],this.geolocate.getAccuracy());this.posFt.setGeometry(new S.default([i,t]))}else this.posFt.setGeometry(new S.default([i]));this.popup.hidden||this._updatePopUpCnt(),this.follow&&this.updateView(i),this.options.remainActive||this.geolocate.setTracking(!1)},M.prototype.updateView=function(t){this.follow&&(this.map.getView().setCenter(t.getCoordinates()),this.options.keepCurrentZoomLevel||this.map.getView().setZoom(this.options.locateOptions.maxZoom))},M.prototype._updatePopUpCnt=function(){let t,o;this.options.metric?(t=this.geolocate.getAccuracy(),o=this.options.strings.metersUnit):(t=Math.round(3.2808399*this.geolocate.getAccuracy()),o=this.options.strings.feetUnit);let e=this.options.strings.popup.replace("{distance}",t);this.popCnt.innerHTML=e.replace("{unit}",o),this.overlay.setPosition(this.posFt.getGeometry().getGeometries()[0].getCoordinates()),this.popup.hidden=!1},M.prototype.onLocationError=function(t){alert(t.message)},M.prototype.mapClick=function(t){let o=this.map.forEachFeatureAtPixel(t.pixel,(function(t){return t}));o&&"_locate-pos"===o.get("id")&&this.popup.hidden?this._updatePopUpCnt():this.popup.hidden||(V.hidden=!0)},M.prototype._getDefaultStyles=function(){return new I.default({image:new B.default({radius:6,fill:new j.default({color:"rgba(42,147,238,0.7)"}),stroke:new G.default({color:"rgba(19,106,236,1)",width:2})}),fill:new j.default({color:"rgba(19,106,236,0.15)"}),stroke:new G.default({color:"rgba(19,106,236,1)",width:2})})},M.prototype.setStrings=function(t){this.options.strings=a()({},this.options.strings,t)},M.prototype.setTrackingOptions=function(t){this.geolocate&&(this.geolocate.setTrackingOptions(t),this.options.locateOptions={...t})};const W=M,R={follow:!0,remainActive:!0,metric:!0,stopFollowingOnDrag:!0,keepCurrentZoomLevel:!1,locateOptions:{maximumAge:2e3,enableHighAccuracy:!1,timeout:1e4,maxZoom:18}};function Y(t){return{...R,...t,locateOptions:{...R.locateOptions,...t.locateOptions}}}const z=class{start({map:t,options:o,messages:e,status:i,onStateChange:n,onLocationError:s}){this.locate=new W(t,Y(o)),this.locate.setStrings(e),this.locate.options.onLocationError=s,this.locate.on("propertychange",(t=>{n(t.target.get(t.key))})),this.configureLocate(i)}update({status:t,messages:o,options:e}){this.configureLocate(t),this.locate.setStrings(o),this.locate.setTrackingOptions(Y(e).locateOptions)}clear(){}configureLocate(t){let o=this.locate.get("state");"ENABLED"===t&&"DISABLED"===o?this.locate.start():"FOLLOWING"===t&&"ENABLED"===o?this.locate.startFollow():"DISABLED"===t&&this.locate.stop()}}},96272:(t,o,e)=>{"use strict";e.d(o,{Z:()=>s});var i=e(23645),n=e.n(i)()((function(t){return t[1]}));n.push([t.id,'.static-map .ol-popup {\r\n    position: absolute;\r\n    text-align: center;\r\n    font: 12px/1.5 "Helvetica Neue", Arial, Helvetica, sans-serif;\r\n    -ms-transform: translate(-50%,-100%); /* IE 9 */\r\n    -webkit-transform: translate(-50%,-100%); /* Safari */\r\n    transform: translate(-50%,-100%);\r\n}\r\n.static-map a.ol-popup-close-btn {\r\n  position: absolute;\r\n  top: 0;\r\n  right: 0;\r\n  padding: 4px 4px 0 0;\r\n  text-align: center;\r\n  width: 18px;\r\n  height: 14px;\r\n  font: 16px/14px Tahoma, Verdana, sans-serif;\r\n  color: #c3c3c3;\r\n  text-decoration: none;\r\n  font-weight: bold;\r\n  background: transparent;\r\n}\r\n.static-map .ol-popup-cnt-wrapper {\r\n  padding: 1px;\r\n  text-align: left;\r\n  border-radius: 12px;\r\n}\r\n.static-map .ol-popup-cnt-wrapper, .static-map .ol-popup-tip {\r\n  background: white;\r\n  box-shadow: 0 3px 14px rgba(0,0,0,0.4);\r\n}\r\n.static-map .ol-popup-cnt {\r\n  margin: 13px 19px;\r\n  line-height: 1.4;\r\n   white-space: nowrap;\r\n\r\n}\r\n.static-map .ol-popup-tip-wrapper {\r\n  margin: 0 auto;\r\n  width: 40px;\r\n  height: 20px;\r\n  position: relative;\r\n  overflow: hidden;\r\n\r\n}\r\n.static-map .ol-popup-tip {\r\n  width: 17px;\r\n  height: 17px;\r\n  padding: 1px;\r\n  margin: -10px auto 0;\r\n  -webkit-transform: rotate(45deg);\r\n  -moz-transform: rotate(45deg);\r\n  -ms-transform: rotate(45deg);\r\n  -o-transform: rotate(45deg);\r\n  transform: rotate(45deg);\r\n}\r\n',""]);const s=n}}]);